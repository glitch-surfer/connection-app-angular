"use strict";(self.webpackChunkconnection=self.webpackChunkconnection||[]).push([[788],{788:(L,m,a)=>{a.r(m),a.d(m,{SignUpComponent:()=>$});var l=a(6814),p=a(2072),r=a(6223),g=a(2296),d=a(5940),b=a(8645),P=a(6306),v=a(6232),w=a(4716),u=a(192),n=a(9212),O=a(9392),M=a(8833);let f=(()=>{class t{static#n=this.duplicatedEmail=[];constructor(e,o,i){this.http=e,this.router=o,this.notificationService=i,this.loading$$=new b.x,this.loading$=this.loading$$.asObservable()}onSubmit(e){if(!e.valid)return void e.markAllAsTouched();const o=e.value;this.loading$$.next(!0),this.http.signUp(o).pipe((0,P.K)(i=>{if(this.notificationService.error(i.error.message||u.T.UNKNOWN_ERROR),"PrimaryDuplicationException"===i.error.type){const c=e.get("email");c.setErrors({duplicatedEmail:i.error.message}),t.duplicatedEmail.push(c.value)}return v.E}),(0,w.x)(()=>this.loading$$.next(!1))).subscribe(()=>{this.router.navigate(["/signin"]),this.notificationService.success(u.T.SUCCESS_SIGNUP)})}static#t=this.\u0275fac=function(o){return new(o||t)(n.LFG(O.e),n.LFG(p.F0),n.LFG(M.g))};static#e=this.\u0275prov=n.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function y(t,s){1&t&&n._UZ(0,"mat-spinner",2)}function S(t,s){1&t&&(n.TgZ(0,"p",17),n._uU(1,"Please enter name"),n.qZA())}function Z(t,s){if(1&t&&(n.TgZ(0,"p",17),n._uU(1),n.qZA()),2&t){const e=n.oxw(2);n.xp6(1),n.AsE(" Maximum length is ",null==e.name||null==e.name.errors||null==e.name.errors.maxlength?null:e.name.errors.maxlength.requiredLength,", you entered ",null==e.name||null==e.name.errors||null==e.name.errors.maxlength?null:e.name.errors.maxlength.actualLength," ")}}function I(t,s){1&t&&(n.TgZ(0,"p",17),n._uU(1,"Only letters are allowed"),n.qZA())}function T(t,s){1&t&&(n.TgZ(0,"p",17),n._uU(1,"Please enter email"),n.qZA())}function E(t,s){1&t&&(n.TgZ(0,"p",17),n._uU(1,"The email is invalid"),n.qZA())}function k(t,s){if(1&t&&(n.TgZ(0,"p",17),n._uU(1),n.qZA()),2&t){const e=n.oxw(2);n.xp6(1),n.hij(" ",null==e.email||null==e.email.errors?null:e.email.errors.duplicatedEmail," ")}}function A(t,s){1&t&&(n.TgZ(0,"p",17),n._uU(1," Please enter a password "),n.qZA())}function F(t,s){if(1&t&&(n.TgZ(0,"p",17),n._uU(1),n.qZA()),2&t){const e=n.oxw(3);n.xp6(1),n.hij(" Your password isn't strong enough: ",null==e.password||null==e.password.errors?null:e.password.errors.weakPassword," ")}}function N(t,s){if(1&t&&n.YNc(0,F,2,1,"p",7),2&t){const e=n.oxw(2);n.Q6J("ngIf",e.hasError("password","weakPassword"))}}function z(t,s){if(1&t){const e=n.EpF();n.TgZ(0,"form",3),n.NdJ("ngSubmit",function(){n.CHM(e);const i=n.oxw();return n.KtG(i.onSubmit())}),n.TgZ(1,"h2"),n._uU(2,"Sign up"),n.qZA(),n.TgZ(3,"div",4),n._UZ(4,"label",5)(5,"input",6),n.YNc(6,S,2,0,"p",7)(7,Z,2,2,"p",7)(8,I,2,0,"p",7),n._UZ(9,"label",8)(10,"input",9),n.YNc(11,T,2,0,"p",7)(12,E,2,0,"p",7)(13,k,2,1,"p",7),n._UZ(14,"label",10)(15,"input",11),n.YNc(16,A,2,0,"p",12)(17,N,1,1,"ng-template",null,13,n.W1O),n.qZA(),n.TgZ(19,"div",14)(20,"a",15),n._uU(21,"SignIn"),n.qZA(),n.TgZ(22,"button",16),n.ALo(23,"async"),n._uU(24," SignUp "),n.qZA()()()}if(2&t){const e=n.MAs(18),o=n.oxw();n.Q6J("formGroup",o.form),n.xp6(6),n.Q6J("ngIf",o.hasError("name","required")),n.xp6(1),n.Q6J("ngIf",o.hasError("name","maxlength")),n.xp6(1),n.Q6J("ngIf",o.hasError("name","pattern")),n.xp6(3),n.Q6J("ngIf",o.hasError("email","required")),n.xp6(1),n.Q6J("ngIf",o.hasError("email","email")),n.xp6(1),n.Q6J("ngIf",o.hasError("email","duplicatedEmail")),n.xp6(3),n.Q6J("ngIf",o.hasError("password","required"))("ngIfElse",e),n.xp6(4),n.Q6J("routerLink","/signin"),n.xp6(2),n.Q6J("disabled",!o.form.valid||n.lcZ(23,11,o.loading$))}}let J=(()=>{class t{constructor(e){this.signUpService=e,this.loading$=this.signUpService.loading$,this.form=new r.cw({name:new r.NI("",{validators:[r.kI.required,r.kI.maxLength(40),r.kI.pattern(/^[a-zA-Z\u0430-\u044f\u0410-\u042f ]+$/)]}),email:new r.NI("",{validators:[r.kI.required,r.kI.email,t=>f.duplicatedEmail.includes(t.value)?{duplicatedEmail:`Email: ${t.value} is already in use`}:null]}),password:new r.NI("",{validators:[r.kI.required,t=>t.value?.length<8?{weakPassword:"Password must be at least 8 characters long"}:(t=>/[a-z]/.test(t)&&/[A-Z]/.test(t))(t.value)?(t=>/[0-9]/.test(t)&&/[a-zA-Z]/.test(t))(t.value)?(t=>/[!@#$%^&*()_+\-=[\]{};':"\\|,.<>/?]+/.test(t))(t.value)?null:{weakPassword:"Password must contain at least one symbol"}:{weakPassword:"Password must contain at least one number and one letter"}:{weakPassword:"Password must contain at least one uppercase and one lowercase letter"}]})})}onSubmit(){this.signUpService.onSubmit(this.form)}hasError(e,o){const i=this.form.get(e);return i?.touched&&i?.errors?.[o]}get password(){return this.form.get("password")}get email(){return this.form.get("email")}get name(){return this.form.get("name")}static#n=this.\u0275fac=function(o){return new(o||t)(n.Y36(f))};static#t=this.\u0275cmp=n.Xpm({type:t,selectors:[["app-sign-up-form"]],standalone:!0,features:[n.jDz],decls:4,vars:4,consts:[["class","spinner",4,"ngIf","ngIfElse"],["content",""],[1,"spinner"],[1,"signup-form",3,"formGroup","ngSubmit"],[1,"container"],["for","name",1,"label"],["type","text","formControlName","name","id","name","placeholder","Vasya",1,"input"],["class","error",4,"ngIf"],["for","email",1,"label"],["type","text","formControlName","email","id","email","placeholder","email@mail.com",1,"input"],["for","password",1,"label"],["type","password","formControlName","password","id","password","placeholder","Password",1,"input"],["class","error",4,"ngIf","ngIfElse"],["weakPassword",""],[1,"btn-container"],[3,"routerLink"],["mat-flat-button","","color","primary","type","submit",3,"disabled"],[1,"error"]],template:function(o,i){if(1&o&&(n.YNc(0,y,1,0,"mat-spinner",0),n.ALo(1,"async"),n.YNc(2,z,25,13,"ng-template",null,1,n.W1O)),2&o){const c=n.MAs(3);n.Q6J("ngIf",n.lcZ(1,2,i.loading$))("ngIfElse",c)}},dependencies:[l.ez,l.O5,l.Ov,r.UX,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,p.Bz,p.rH,g.ot,g.lW,d.Cq,d.Ou],styles:["*[_ngcontent-%COMP%]{box-sizing:border-box;margin:0;padding:0}html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%}body[_ngcontent-%COMP%]{background-color:#e3f2fd;font-family:Roboto,Helvetica Neue,sans-serif}body.dark-theme[_ngcontent-%COMP%]{background-color:#283593;color:#e3f2fd}a[_ngcontent-%COMP%], a[_ngcontent-%COMP%]:visited{color:#3f51b5}a[_ngcontent-%COMP%]:hover, a[_ngcontent-%COMP%]:visited:hover{opacity:.8}a[_ngcontent-%COMP%]:active, a[_ngcontent-%COMP%]:visited:active{opacity:.6}.dark-theme[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .dark-theme[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:visited{color:#e89126}.error-snackbar[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;color:#3f51b5;background-color:#e3f2fd;border-bottom:3px solid #ff0000}.success-snackbar[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;color:#3f51b5;background-color:#e3f2fd;border-bottom:3px solid #00ff00}button[_ngcontent-%COMP%]:disabled{color:#757575}.btn[_ngcontent-%COMP%]{height:36px;padding:0 1rem;align-self:flex-start;color:#fafafa;background-color:#424242;border-radius:4px;border:none;cursor:pointer}.btn[_ngcontent-%COMP%]:hover{opacity:.9}.btn[_ngcontent-%COMP%]:disabled{background-color:#b8b1b1;opacity:1;cursor:not-allowed}.input[_ngcontent-%COMP%]{width:100%;padding:0 .5rem;background-color:transparent;border:1px solid #3f51b5;border-radius:4px}.messages[_ngcontent-%COMP%]{max-height:50vh;display:flex;flex-direction:column;gap:.25rem;padding:.5rem;border:1px solid #283593;border-radius:4px;list-style:none;overflow:auto}.messages__item[_ngcontent-%COMP%]{margin-right:2rem;padding:.5rem;width:-moz-fit-content;width:fit-content;display:flex;flex-direction:column;gap:.25rem;border:1px solid #3f51b5;border-radius:4px;background-color:#9cd1f8}.user-messages[_ngcontent-%COMP%]{margin-right:0;margin-left:2rem;align-self:flex-end}.spinner[_ngcontent-%COMP%]{margin-top:1rem;align-self:center}[_nghost-%COMP%]{margin-top:45px;display:flex;flex-direction:column;gap:20px;align-items:center}.signup-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;padding:20px;width:350px;border-radius:4px}.title[_ngcontent-%COMP%]{font-size:18px;font-weight:700;line-height:21px;text-align:left}.btn-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px}.label[_ngcontent-%COMP%]{font-size:10px;font-weight:400;line-height:12px;text-align:left}.input[_ngcontent-%COMP%]{width:100%;padding:13px 8px;background-color:transparent;border:1px solid #3f51b5;border-radius:4px}.error[_ngcontent-%COMP%]{font-size:10px;font-weight:400;line-height:12px;text-align:left;color:red}.dark-theme[_nghost-%COMP%]   a[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   a[_ngcontent-%COMP%], .dark-theme[_nghost-%COMP%]   a[_ngcontent-%COMP%]:visited, .dark-theme   [_nghost-%COMP%]   a[_ngcontent-%COMP%]:visited{color:#e89126}.dark-theme[_nghost-%COMP%]   .input[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .input[_ngcontent-%COMP%]{color:#e3f2fd;border-color:#e89126}"]})}return t})(),$=(()=>{class t{static#n=this.\u0275fac=function(o){return new(o||t)};static#t=this.\u0275cmp=n.Xpm({type:t,selectors:[["app-sign-up"]],standalone:!0,features:[n.jDz],decls:1,vars:0,template:function(o,i){1&o&&n._UZ(0,"app-sign-up-form")},dependencies:[l.ez,J]})}return t})()}}]);