import{a as Y,b as Z,c as H,d as b,f as K,g as W,h as J,j as y,k as Q,m as X,n as ee,o as te,y as I,z as ne}from"./chunk-2SKVBX5T.js";import{F as B,H as U}from"./chunk-S5VQBE6T.js";import{Aa as m,Ca as a,Cb as G,Da as l,Db as L,Ea as d,Fb as q,Hb as C,Ia as j,L as $,Ma as A,O as u,Oa as g,Q as _,Ra as w,Sa as p,U as T,Ua as M,V as R,Xa as h,Za as v,_a as S,e as k,eb as O,h as E,la as c,ma as V,mb as D,qb as z,sb as x,v as F,va as s,z as N}from"./chunk-5IAL5MBJ.js";var ce=e=>/[a-z]/.test(e)&&/[A-Z]/.test(e),pe=e=>/[0-9]/.test(e)&&/[a-zA-Z]/.test(e),me=e=>/[!@#$%^&*()_+\-=[\]{};':"\\|,.<>/?]+/.test(e),re=()=>e=>e.value?.length<8?{weakPassword:"Password must be at least 8 characters long"}:ce(e.value)?pe(e.value)?me(e.value)?null:{weakPassword:"Password must contain at least one symbol"}:{weakPassword:"Password must contain at least one number and one letter"}:{weakPassword:"Password must contain at least one uppercase and one lowercase letter"};var f=(()=>{let t=class t{constructor(n,r,o){this.http=n,this.router=r,this.notificationService=o,this.loading$$=new k,this.loading$=this.loading$$.asObservable()}onSubmit(n){let r=n.value;this.loading$$.next(!0),this.http.signIn(r).pipe(F(o=>(this.notificationService.error(o.error.message||I.UNKNOWN_ERROR),o.error.type==="NotFoundException"&&(n.setErrors({incorrectCreds:o.error.message}),t.incorrectCredentials.push(r)),E)),N(()=>this.loading$$.next(!1))).subscribe(o=>{let{email:P}=n.value,{token:se,uid:le}=o;C.setCredentials({email:P,token:se,uid:le}),this.router.navigate(["/"]),this.notificationService.success(I.SUCCESS_SIGNIN)})}};t.incorrectCredentials=[],t.\u0275fac=function(r){return new(r||t)(u(C),u(G),u(ne))},t.\u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var fe=e=>f.incorrectCredentials.some(t=>t.email===e.email&&t.password===e.password),ie=()=>e=>f.incorrectCredentials.length&&fe(e.value)?{incorrectCreds:"Email or password is incorrect"}:null;function ue(e,t){e&1&&d(0,"mat-spinner",2)}function _e(e,t){e&1&&(a(0,"p",15),p(1,"Please enter email"),l())}function he(e,t){e&1&&(a(0,"p",15),p(1,"The email is invalid"),l())}function xe(e,t){e&1&&(a(0,"p",15),p(1," Please enter a password "),l())}function Ce(e,t){if(e&1&&(a(0,"p",15),p(1),l()),e&2){let i=g(3);c(1),M(" Your password isn't strong enough: ",i.password==null||i.password.errors==null?null:i.password.errors.weakPassword," ")}}function be(e,t){if(e&1&&m(0,Ce,2,1,"p",7),e&2){let i=g(2);s("ngIf",i.hasError("password","weakPassword"))}}function Pe(e,t){if(e&1&&(a(0,"p",15),p(1),l()),e&2){let i=g(2);c(1),M(" ",i.form.errors==null?null:i.form.errors.incorrectCreds," ")}}function we(e,t){if(e&1){let i=j();a(0,"form",3),A("ngSubmit",function(){T(i);let r=g();return R(r.onSubmit())}),a(1,"h2"),p(2,"Sign in"),l(),a(3,"div",4),d(4,"label",5)(5,"input",6),m(6,_e,2,0,"p",7)(7,he,2,0,"p",7),d(8,"label",8)(9,"input",9),m(10,xe,2,0,"p",10)(11,be,1,1,"ng-template",null,11,O)(13,Pe,2,1,"p",7),l(),a(14,"div",12)(15,"a",13),p(16,"SignUp"),l(),a(17,"button",14),v(18,"async"),p(19," SignIn "),l()()()}if(e&2){let i=w(12),n=g();s("formGroup",n.form),c(6),s("ngIf",n.hasError("email","required")),c(1),s("ngIf",n.hasError("email","email")),c(3),s("ngIf",n.hasError("password","required"))("ngIfElse",i),c(3),s("ngIf",n.form.hasError("incorrectCreds")),c(2),s("routerLink","/signup"),c(2),s("disabled",!n.form.valid||S(18,8,n.loading$))}}var ae=(()=>{let t=class t{constructor(n){this.signInService=n,this.loading$=this.signInService.loading$,this.form=new J({email:new y("",{validators:[b.required,b.email]}),password:new y("",{validators:[b.required,re()]})},{validators:[ie()]})}onSubmit(){this.signInService.onSubmit(this.form)}hasError(n,r){let o=this.form.get(n);return o?.touched&&o?.errors?.[r]}get password(){return this.form.get("password")}get email(){return this.form.get("email")}};t.\u0275fac=function(r){return new(r||t)(V(f))},t.\u0275cmp=_({type:t,selectors:[["app-sign-in-form"]],standalone:!0,features:[h],decls:4,vars:4,consts:[["class","spinner",4,"ngIf","ngIfElse"],["content",""],[1,"spinner"],[1,"signup-form",3,"formGroup","ngSubmit"],[1,"container"],["for","email",1,"label"],["type","text","formControlName","email","id","email","placeholder","email@mail.com",1,"input"],["class","error",4,"ngIf"],["for","password",1,"label"],["type","password","formControlName","password","id","password","placeholder","Password",1,"input"],["class","error",4,"ngIf","ngIfElse"],["weakPassword",""],[1,"btn-container"],[3,"routerLink"],["mat-flat-button","","color","primary","type","submit",3,"disabled"],[1,"error"]],template:function(r,o){if(r&1&&(m(0,ue,1,0,"mat-spinner",0),v(1,"async"),m(2,we,20,10,"ng-template",null,1,O)),r&2){let P=w(3);s("ngIf",S(1,2,o.loading$))("ngIfElse",P)}},dependencies:[x,D,z,te,Q,H,K,W,X,ee,q,L,U,B,Z,Y],styles:["*[_ngcontent-%COMP%]{box-sizing:border-box;margin:0;padding:0}html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%}body[_ngcontent-%COMP%]{background-color:#e3f2fd;font-family:Roboto,Helvetica Neue,sans-serif}body.dark-theme[_ngcontent-%COMP%]{background-color:#283593;color:#e3f2fd}a[_ngcontent-%COMP%], a[_ngcontent-%COMP%]:visited{color:#3f51b5}a[_ngcontent-%COMP%]:hover, a[_ngcontent-%COMP%]:visited:hover{opacity:.8}a[_ngcontent-%COMP%]:active, a[_ngcontent-%COMP%]:visited:active{opacity:.6}.dark-theme[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .dark-theme[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:visited{color:#e89126}.error-snackbar[_ngcontent-%COMP%]{width:fit-content;color:#3f51b5;background-color:#e3f2fd;border-bottom:3px solid #ff0000}.success-snackbar[_ngcontent-%COMP%]{width:fit-content;color:#3f51b5;background-color:#e3f2fd;border-bottom:3px solid #00ff00}button[_ngcontent-%COMP%]:disabled{color:#757575}.btn[_ngcontent-%COMP%]{height:36px;padding:0 1rem;align-self:flex-start;color:#fafafa;background-color:#424242;border-radius:4px;border:none;cursor:pointer}.btn[_ngcontent-%COMP%]:hover{opacity:.9}.btn[_ngcontent-%COMP%]:disabled{background-color:#b8b1b1;opacity:1;cursor:not-allowed}.input[_ngcontent-%COMP%]{width:100%;padding:0 .5rem;background-color:transparent;border:1px solid #3f51b5;border-radius:4px}.messages[_ngcontent-%COMP%]{max-height:50vh;display:flex;flex-direction:column;gap:.25rem;padding:.5rem;border:1px solid #283593;border-radius:4px;list-style:none;overflow:auto}.messages__item[_ngcontent-%COMP%]{margin-right:2rem;padding:.5rem;width:fit-content;display:flex;flex-direction:column;gap:.25rem;border:1px solid #3f51b5;border-radius:4px;background-color:#9cd1f8}.user-messages[_ngcontent-%COMP%]{margin-right:0;margin-left:2rem;align-self:flex-end}.spinner[_ngcontent-%COMP%]{margin-top:1rem;align-self:center}[_nghost-%COMP%]{margin-top:45px;display:flex;flex-direction:column;gap:20px;align-items:center}.signup-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;padding:20px;width:350px;border-radius:4px}.btn-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px}.label[_ngcontent-%COMP%]{font-size:10px;font-weight:400;line-height:12px;text-align:left}.input[_ngcontent-%COMP%]{width:100%;padding:13px 8px;background-color:transparent;border:1px solid #3f51b5;border-radius:4px}.error[_ngcontent-%COMP%]{font-size:10px;font-weight:400;line-height:12px;text-align:left;color:red}.dark-theme[_nghost-%COMP%]   a[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   a[_ngcontent-%COMP%], .dark-theme[_nghost-%COMP%]   a[_ngcontent-%COMP%]:visited, .dark-theme   [_nghost-%COMP%]   a[_ngcontent-%COMP%]:visited{color:#e89126}.dark-theme[_nghost-%COMP%]   .input[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .input[_ngcontent-%COMP%]{color:#e3f2fd;border-color:#e89126}"]});let e=t;return e})();var Ue=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=_({type:t,selectors:[["app-sign-in"]],standalone:!0,features:[h],decls:1,vars:0,template:function(r,o){r&1&&d(0,"app-sign-in-form")},dependencies:[x,ae]});let e=t;return e})();export{Ue as SignInComponent};
