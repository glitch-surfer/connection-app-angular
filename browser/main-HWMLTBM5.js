import{a as X,b as Y}from"./chunk-HDBRL7X2.js";import{a as $,b as J,c as _}from"./chunk-QMW4F7ZL.js";import{a as K}from"./chunk-5JDCOLZI.js";import{a as Z,b as q,c as A}from"./chunk-IOG2XBG3.js";import{a as Q,b as V}from"./chunk-UB4EZDCW.js";import{c as B,d as r,e as s}from"./chunk-GSZV43AH.js";import{G as z,H as W,f as U}from"./chunk-S5VQBE6T.js";import{$ as P,Aa as b,Bb as F,Ca as c,Cb as k,Da as d,Db as I,Ea as S,Eb as j,Fb as N,Hb as m,L as w,Ma as O,P as C,Q as v,Sa as l,Xa as x,a as i,b as p,la as u,nb as L,ob as D,sb as M,va as h,wb as E,xa as T,xb as H,zb as G}from"./chunk-5IAL5MBJ.js";var g=()=>{let e=C(k);return m.isAuth()||e.createUrlTree(["/signin"])};var y=()=>{let e=C(k);return!m.isAuth()||e.createUrlTree(["/"])};var ee=[{path:"",loadComponent:()=>import("./chunk-HNE2YSYT.js").then(e=>e.GroupsComponent),canActivate:[g]},{path:"signin",loadComponent:()=>import("./chunk-FTL3JNIU.js").then(e=>e.SignInComponent),canActivate:[y]},{path:"signup",loadComponent:()=>import("./chunk-VGXDUTTY.js").then(e=>e.SignUpComponent),canActivate:[y]},{path:"profile",loadComponent:()=>import("./chunk-JZ6URPVE.js").then(e=>e.ProfileComponent),canActivate:[g]},{path:"group/:id",loadComponent:()=>import("./chunk-TVQZXSB7.js").then(e=>e.GroupDialogComponent),canActivate:[g]},{path:"conversation/:id",loadComponent:()=>import("./chunk-K6PSOIS7.js").then(e=>e.ConversationComponent),canActivate:[g]},{path:"**",loadComponent:()=>import("./chunk-VYWXYJYD.js").then(e=>e.NotFoundComponent)}];var oe=(()=>{let t=class t{intercept(a,n){if(!m.isAuth())return n.handle(a);let{email:f,token:R,uid:de}=m.getCredentials(),ue=a.clone({headers:a.headers.set("rs-email",f).set("Authorization",`Bearer ${R}`).set("rs-uid",de)});return n.handle(ue)}};t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=w({token:t,factory:t.\u0275fac});let e=t;return e})();var le={name:"",email:"",uid:"",createdAt:""},re=s(le,r(K,(e,{profile:t})=>i({},t)));var fe=[],ne=s(fe,r($,(e,{groups:t})=>[...t]),r(J,(e,{group:t})=>[t,...e]),r(_,(e,{id:t})=>e.filter(o=>o.id!==t)));var he=[],ie=s(he,r(Q,(e,{peoples:t})=>[...t]),r(V,(e,{conversationID:t,uid:o})=>e.map(a=>a.uid===o?p(i({},a),{conversationId:t}):a)),r(A,(e,{id:t})=>e.map(o=>o.conversationId===t?p(i({},o),{conversationId:null}):o)));var ge={},ae=s(ge,r(X,(e,{groupId:t,messages:o})=>p(i({},e),{[t]:{groupId:t,messages:o}})),r(Y,(e,{groupId:t,messages:o})=>p(i({},e),{[t]:{groupId:t,messages:[...e[t].messages,...o]}})),r(_,(e,{id:t})=>{let o=i({},e);return delete o[t],o}));var Ce={},me=s(Ce,r(Z,(e,{conversationId:t,messages:o})=>p(i({},e),{[t]:{conversationId:t,messages:o}})),r(q,(e,{conversationId:t,messages:o})=>p(i({},e),{[t]:{conversationId:t,messages:[...e[t].messages,...o]}})),r(A,(e,{id:t})=>{let o=i({},e);return delete o[t],o}));var ve={provide:E,useClass:oe,multi:!0},se={providers:[j(ee),m,ve,P([H,B.forRoot({profile:re,groups:ne,peoples:ie,dialogs:ae,conversations:me})]),U()]};function Se(e,t){e&1&&(c(0,"a",9),l(1,"Groups"),d())}function xe(e,t){e&1&&(c(0,"a",10),l(1,"Profile"),d())}function Me(e,t){e&1&&(c(0,"a",11),l(1,"Sign Up"),d())}function ke(e,t){e&1&&(c(0,"a",12),l(1,"Sign In"),d())}var pe=(()=>{let t=class t{constructor(){this.authService=m,this.darkTheme=localStorage.getItem("theme")==="dark",document.body.classList.toggle("dark-theme",!this.darkTheme)}get isAuth(){return this.authService.isAuth()}toggleTheme(){this.darkTheme=!this.darkTheme,document.body.classList.toggle("dark-theme"),localStorage.setItem("theme",this.darkTheme?"dark":"")}};t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=v({type:t,selectors:[["app-header"]],standalone:!0,features:[x],decls:13,vars:7,consts:[[1,"title"],[1,"nav-wrapper"],[1,"nav",3,"ngSwitch"],["routerLink","/",4,"ngSwitchCase"],["routerLink","/profile",4,"ngSwitchCase"],["routerLink","/signup",4,"ngSwitchCase"],["routerLink","/signin",4,"ngSwitchCase"],["mat-icon-button","",1,"theme-btn",3,"click"],["src","assets/theme-icon.svg","alt","switch theme icon"],["routerLink","/"],["routerLink","/profile"],["routerLink","/signup"],["routerLink","/signin"]],template:function(n,f){n&1&&(c(0,"h1",0),l(1," Connection App "),c(2,"small")(3,"i"),l(4,"by Glitch-surfer"),d()()(),c(5,"div",1)(6,"nav",2),b(7,Se,2,0,"a",3)(8,xe,2,0,"a",4)(9,Me,2,0,"a",5)(10,ke,2,0,"a",6),d(),c(11,"button",7),O("click",function(){return f.toggleTheme()}),S(12,"img",8),d()()),n&2&&(u(6),h("ngSwitch",f.isAuth),u(1),h("ngSwitchCase",!0),u(1),h("ngSwitchCase",!0),u(1),h("ngSwitchCase",!1),u(1),h("ngSwitchCase",!1),u(1),T("switched",!f.darkTheme))},dependencies:[M,L,D,N,I,W,z],styles:["[_nghost-%COMP%]{padding:1rem;display:flex;align-items:center;justify-content:space-between}.title[_ngcontent-%COMP%]{margin:0;color:#8e12b4}.nav-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.nav[_ngcontent-%COMP%]{display:flex;gap:1rem}.theme-btn[_ngcontent-%COMP%]{transition:transform .3s ease-in-out,filter .3s ease-in-out}.theme-btn[_ngcontent-%COMP%]:hover{opacity:.8}.theme-btn.switched[_ngcontent-%COMP%]{transform:rotate(180deg)}.dark-theme[_nghost-%COMP%]   .title[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .title[_ngcontent-%COMP%]{color:#e8b6f8}.dark-theme[_nghost-%COMP%]   .theme-btn[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .theme-btn[_ngcontent-%COMP%]{filter:invert(1)}"]});let e=t;return e})();var ce=(()=>{let t=class t{};t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=v({type:t,selectors:[["app-root"]],standalone:!0,features:[x],decls:2,vars:0,template:function(n,f){n&1&&S(0,"app-header")(1,"router-outlet")},dependencies:[M,F,pe]});let e=t;return e})();G(ce,se).catch(e=>{console.error(e)});
